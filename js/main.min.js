!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./js/main.js")}({"./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./modules/init-phone-mask */"./js/modules/init-phone-mask.js"),a=n(/*! ./modules/init-map */"./js/modules/init-map.js"),r=n(/*! ./modules/init-form */"./js/modules/init-form.js"),c=document.querySelector("body"),s=function(e){return new Intl.NumberFormat("ru-RU").format(e)},u=function(){var e=document.querySelector("[data-title]"),t=document.querySelectorAll(".card:not(.is-deleted)"),n=0,o=0,a="";t.forEach((function(e){n+=Number(e.querySelector("[data-result]").textContent.replace(/\s/g,"")),o+=Number(e.querySelector("[data-amount]").value),a="".concat(o,o%10==1?" товар":o%10>=2&&o%10<=4&&(o%100<10||o%100>=20)?" товара":" товаров")})),e.textContent="".concat(a," на сумму ").concat(s(n))},l=function(e){var t=e.querySelector("[data-price]"),n=e.querySelector("[data-price-old"),o=e.querySelector("[data-amount]");e.querySelector("[data-result]").textContent=s(Number(t.textContent.replace(/\s/g,""))*Number(o.value)),n&&(e.querySelector("[data-result-old]").textContent=s(Number(n.textContent.replace(/\s/g,""))*Number(o.value)))},i=function(){var e=document.querySelector("[data-comment"),t=e.querySelector("textarea");e.querySelector(".textarea__message").textContent="Использовано ".concat(t.value.length,"/").concat(t.maxLength," символов")};document.addEventListener("DOMContentLoaded",(function(){Object(a.initMap)(),u(),i(),Object(o.initPhoneMask)(),Object(r.initForm)(),document.addEventListener("click",(function(e){var t;e.target.closest("[data-burger")&&(t=document.querySelector(".nav"))&&(t.classList.contains("is-open")?(t.classList.remove("is-open"),c.classList.remove("scroll-lock")):(t.classList.add("is-open"),c.classList.add("scroll-lock"))),(e.target.closest("[data-plus]")||e.target.closest("[data-minus]"))&&(!function(e){var t=e.target.closest("[data-price-block]"),n=t.querySelector("[data-amount]");e.target.closest("[data-plus]")&&n.value<n.max&&(n.value=Number(n.value)+1,l(t)),e.target.closest("[data-minus]")&&n.value>n.min&&(n.value=Number(n.value)-1,l(t))}(e),u()),e.target.closest("[data-delete-card]")&&(!function(e){e.target.closest(".card").classList.add("is-deleted")}(e),u()),e.target.closest("[data-restore-card]")&&function(e){e.target.closest(".card").classList.remove("is-deleted"),u()}(e),e.target.closest("[data-close]")&&function(e){e.target.closest(".order__item").remove()}(e)})),document.addEventListener("input",(function(e){e.target.closest("#comment")&&i()}))}))},"./js/modules/init-form.js":
/*!*********************************!*\
  !*** ./js/modules/init-form.js ***!
  \*********************************/
/*! exports provided: initForm */function(e,t,n){"use strict";n.r(t),n.d(t,"initForm",(function(){return c}));var o=document.querySelector("form"),a=document.querySelector(".modal"),r=document.querySelector("body"),c=function(){if(o){var e=o.querySelector("[type=submit]");o.addEventListener("submit",(function(t){t.preventDefault(),fetch("https://echo.htmlacademy.ru",{method:"POST",body:new FormData(o)}).then((function(t){t.ok&&(!function(){if(a){var e=function(){a.classList.remove("is-active"),r.classList.remove("scroll-lock")};a.classList.add("is-active"),r.classList.add("scroll-lock"),document.addEventListener("click",(function(t){t.target.closest(".modal__close")&&e(),t.target.closest(".modal")&&!t.target.closest(".modal__content")&&e()})),document.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Esc"!==t.key||(t.preventDefault(),e())}))}}(),o.reset(),e.blur())}))}))}}},"./js/modules/init-map.js":
/*!********************************!*\
  !*** ./js/modules/init-map.js ***!
  \********************************/
/*! exports provided: initMap */function(e,t,n){"use strict";n.r(t),n.d(t,"initMap",(function(){return s}));var o,a=document.getElementById("address"),r=document.getElementById("search"),c="737185198c92ad17e79e8ae65f3ab0d1a68d598d",s=function(){var e=document.querySelector("#map");"undefined"!=typeof ymaps&&e&&ymaps.ready((function(){var e=new ymaps.Map(map,{center:[55.76,37.64],zoom:15,controls:[]}),t=new ymaps.Placemark([55.76,37.64],null,{iconLayout:"default#image",iconImageHref:"./img/svg/pin.svg",iconImageSize:[28,40],iconImageOffset:[-14,-40]});e.geoObjects.add(t),e.events.add("click",(function(n){var o;t.geometry.setCoordinates(n.get("coords")),e.geoObjects.add(t),o={lat:n.get("coords")[0],lon:n.get("coords")[1]},fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address/",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+c},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){a.value=e.suggestions[0].value}))})),r.addEventListener("click",(function(n){var r;n.preventDefault(),r=a.value,fetch("https://cleaner.dadata.ru/api/v1/clean/address/",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Token "+c,"X-Secret":"49d9b496910a96d5bb0d07f0e273195db8532b47"},body:JSON.stringify([r])}).then((function(e){return e.json()})).then((function(e){o=e[0],console.log(e)})),a.value=o.result,t.geometry.setCoordinates({lat:o.geo_lat,lon:o.geo_lon}),e.geoObjects.add(t)}))}))}},"./js/modules/init-phone-mask.js":
/*!***************************************!*\
  !*** ./js/modules/init-phone-mask.js ***!
  \***************************************/
/*! exports provided: initPhoneMask */function(e,t,n){"use strict";n.r(t),n.d(t,"initPhoneMask",(function(){return a}));var o=document.querySelector("[type=tel]"),a=function(){o&&(o.addEventListener("keypress",(function(e){(e.keyCode<47||e.keyCode>57)&&e.preventDefault(),0===o.value.length&&(o.value="+7 (",o.selectionStart=o.value.length),7===o.value.length&&(o.value+=") ")})),o.addEventListener("click",(function(e){o.selectionStart<4&&(o.selectionStart=o.value.length),"Backspace"===e.key&&o.value.length<=4&&e.preventDefault()})),o.addEventListener("blur",(function(){"+7("===o.value&&(o.value="")})),o.addEventListener("keydown",(function(e){"Backspace"===e.key&&o.value.length<=4&&e.preventDefault(),"ArrowLeft"===e.key&&o.value.length<=4&&e.preventDefault()})))}}});